<%- include('../partials/head.ejs', { title: 'usa - categoryadmin' }) %>

        body {
            background-color: #000000;
        }
        #vehicle-type-selector option,
        #published-vehicle-type-selector option {
            background-color: white;
            color: black;
        }
        #vehicle-type-selector option:hover,
        #published-vehicle-type-selector option:hover {
            background-color: #DC2626;
            color: white;
        }
        .border-bottom-left-to-right {
            position: relative;
            border-radius: 0.75rem;
        }
        .border-bottom-left-to-right:hover::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #DC2626;
            animation: borderLeftToRight 0.3s ease-in-out forwards;
        }
        @keyframes borderLeftToRight {
            to {
                width: 100%;
            }
        }
        .icon-button {
            transition: transform 0.2s;
        }
        .icon-button:hover {
            transform: scale(1.1);
        }
        .filter-button:hover {
            background-color: #DC2626;
            color: #FFFFFF;
        }
        #mobile-menu-overlay {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            opacity: 0;
            width: 16rem;
            height: 100%;
            z-index: 1000;
            pointer-events: auto;
            will-change: transform, opacity;
        }
        .mobile-menu-open {
            transform: translateX(0);
            opacity: 1;
        }
        #mobile-menu-backdrop {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            pointer-events: auto;
        }
        #mobile-menu-backdrop.active {
            display: block;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col text-white font-['Poppins']">
    
<%- include('../partials/navbar') %>

    <!-- Subnavbar -->
    <nav class="bg-gray-800 py-4">
        <div class="container mx-auto px-4 flex justify-center space-x-6">
            <a href="#category" class="text-white text-lg font-semibold hover:text-red-600 transition border-b-2 border-red-600">Category</a>
            <a href="#brands" class="text-white text-lg font-semibold hover:text-red-600 transition">Brands</a>
            <a href="#model" class="text-white text-lg font-semibold hover:text-red-600 transition">Model</a>
            <a href="#article" class="text-white text-lg font-semibold hover:text-red-600 transition">Article</a>
        </div>
    </nav>

    <!-- Main Section -->
    <main class="flex-grow container mx-auto px-4 py-8 max-w-screen-2xl bg-black">
        <!-- Upload Category Section -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-white mb-6">Upload Your Category</h2>
            <div class="flex justify-start mb-6">
                <button id="import-category-btn" class="bg-red-600 text-white text-lg font-semibold px-6 py-2 rounded-lg shadow-lg hover:bg-red-700 transition">
                    Import Category
                </button>
            </div>

            <!-- Import Category Modal (Hidden by Default) -->
            <div id="import-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
                <div class="bg-gray-800 rounded-lg p-6 w-full max-w-2xl">
                    <h3 class="text-2xl font-bold text-white mb-4">Import Category</h3>
                    <select id="vehicle-type-selector" class="w-full bg-gray-700 text-white text-lg font-semibold px-4 py-2 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-red-600">
                        <option value="" disabled selected>Select Vehicle Type</option>
                        <option value="car">Car</option>
                        <option value="bike">Bike</option>
                        <option value="truck">Truck</option>
                    </select>
                    <div id="category-boxes" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
                        <!-- Dynamically populated category boxes -->
                    </div>
                    <button id="close-import-modal" class="mt-4 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">Close</button>
                </div>
            </div>

            <!-- Category Creation Form -->
            <form id="category-form" enctype="multipart/form-data" class="space-y-6 bg-gray-800 p-6 rounded-lg shadow-lg">
                <div>
                    <label for="category-image" class="block text-sm font-medium text-gray-300 mb-1">Category Image</label>
                    <input type="file" id="category-image" name="categoryImage" accept="image/*" class="w-full text-white bg-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-600 file:text-white hover:file:bg-red-700">
                </div>
                <div>
                    <label for="category-name" class="block text-sm font-medium text-gray-300 mb-1">Category Name</label>
                    <input type="text" id="category-name" name="categoryName" placeholder="Enter category name" required class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white">
                </div>
                <div>
                    <label for="vehicle-type" class="block text-sm font-medium text-gray-300 mb-1">Vehicle Type</label>
                    <select id="vehicle-type" name="vehicleType" required class="w-full bg-gray-700 text-white text-lg font-semibold px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600">
                        <option value="" disabled selected>Select Vehicle Type</option>
                        <option value="car">Car</option>
                        <option value="bike">Bike</option>
                        <option value="truck">Truck</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-1">Write Article About This Category</label>
                    <div class="flex space-x-4 mb-4">
                        <button type="button" id="article-icon" class="icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Article">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                        </button>
                        <button type="button" id="photo-icon" class="icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Photo">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        </button>
                        <button type="button" id="link-icon" class="icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Link">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                        </button>
                        <button type="button" id="ads-icon" class="icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Ad">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.379c.4 0 .78.157 1.06.44" /></svg>
                        </button>
                    </div>
                    <div id="content-area" class="relative">
                        <!-- Dynamically populated content (article, photo, link, ad) -->
                    </div>
                    <div>
                        <label for="sources" class="block text-sm font-medium text-gray-300 mb-1">Sources</label>
                        <textarea id="sources" name="sources" placeholder="List source sites (e.g., forbes.com, youtube.com)" class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" rows="4"></textarea>
                    </div>
                </div>
                <button type="submit" id="submit-category-btn" class="w-full bg-red-600 text-white text-lg font-semibold px-6 py-2 rounded-lg shadow-lg hover:bg-red-700 transition">Create or Publish Category</button>
            </form>
        </section>

        <!-- Already Published Categories -->
        <section>
            <h2 class="text-3xl font-bold text-white mb-6">Already Published Category</h2>
            <select id="published-vehicle-type-selector" class="w-full max-w-xs bg-gray-700 text-white text-lg font-semibold px-4 py-2 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-red-600">
                <option value="" disabled selected>Select Vehicle Type</option>
                <option value="car">Car</option>
                <option value="bike">Bike</option>
                <option value="truck">Truck</option>
            </select>
            <div id="published-category-boxes" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Dynamically populated published category boxes -->
            </div>
        </section>
    </main>

    
<%- include('../partials/footer') %>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM fully loaded');

            // Mobile Menu Toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');
            const closeMobileMenuButton = document.getElementById('close-mobile-menu');

            if (!mobileMenuButton || !mobileMenuOverlay || !mobileMenuBackdrop || !closeMobileMenuButton) {
                console.error('Mobile menu elements missing:', {
                    mobileMenuButton: !!mobileMenuButton,
                    mobileMenuOverlay: !!mobileMenuOverlay,
                    mobileMenuBackdrop: !!mobileMenuBackdrop,
                    closeMobileMenuButton: !!closeMobileMenuButton
                });
                return;
            }

            const toggleMenu = () => {
                console.log('Toggling menu');
                mobileMenuOverlay.classList.toggle('mobile-menu-open');
                mobileMenuBackdrop.classList.toggle('active');
            };

            mobileMenuButton.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log('Hamburger menu clicked');
                toggleMenu();
            }, { passive: false });

            mobileMenuButton.addEventListener('touchstart', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log('Hamburger menu touched');
                toggleMenu();
            }, { passive: false });

            closeMobileMenuButton.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log('Close menu clicked');
                mobileMenuOverlay.classList.remove('mobile-menu-open');
                mobileMenuBackdrop.classList.remove('active');
            }, { passive: false });

            mobileMenuBackdrop.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Backdrop clicked, closing menu');
                mobileMenuOverlay.classList.remove('mobile-menu-open');
                mobileMenuBackdrop.classList.remove('active');
            }, { passive: false });

            mobileMenuOverlay.addEventListener('click', (e) => {
                e.stopPropagation();
                console.log('Clicked inside menu, preventing close');
            }, { passive: false });

            // Search Functionality
            document.getElementById('search-button').addEventListener('click', () => {
                const query = document.getElementById('search-input').value;
                console.log('Search button clicked, query:', query);
                if (query) {
                    alert('Search for: ' + query); // Placeholder
                } else {
                    alert('Please enter a search query.');
                }
            });

            // Highlight Active Nav Link
            const navLinks = document.querySelectorAll('#desktop-nav-links a, .mobile-nav-link');
            const currentPath = window.location.pathname;
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('bg-red-600', 'text-white');
                    link.classList.remove('hover:bg-red-600');
                }
            });

            // Import Category Modal
            const importBtn = document.getElementById('import-category-btn');
            const importModal = document.getElementById('import-modal');
            const closeImportModal = document.getElementById('close-import-modal');
            const vehicleTypeSelector = document.getElementById('vehicle-type-selector');
            const categoryBoxes = document.getElementById('category-boxes');

            importBtn.addEventListener('click', () => {
                console.log('Import category button clicked');
                importModal.classList.remove('hidden');
            });

            vehicleTypeSelector.addEventListener('change', (e) => {
                console.log('Vehicle type selected:', e.target.value);
                const vehicleType = e.target.value;
                if (vehicleType) {
                    // Mock data for categories (replace with API response)
                    const categories = [
                        { id: 1, name: 'SUV', vehicleType: 'car', region: 'UK', photo: 'suv.jpg' },
                        { id: 2, name: 'Sedan', vehicleType: 'car', region: 'Canada', photo: 'sedan.jpg' },
                        { id: 3, name: 'Cruiser', vehicleType: 'bike', region: 'Australia', photo: 'cruiser.jpg' }
                    ];
                    categoryBoxes.innerHTML = '';
                    categories
                        .filter(cat => cat.vehicleType === vehicleType && cat.region !== 'USA')
                        .forEach(cat => {
                            const box = document.createElement('div');
                            box.className = 'bg-gradient-to-b from-red-500 to-black rounded-xl shadow-xl transition-all duration-300 p-5 flex flex-col items-center text-center border-bottom-left-to-right shadow-md';
                            box.innerHTML = `
                                <div class="w-full h-32 bg-white rounded-lg mb-4 shadow-inner border-transparent">
                                    <img src="/Uploads/categories/${cat.photo}" alt="${cat.name}" class="w-full h-full object-cover rounded-lg">
                                </div>
                                <div class="text-white font-semibold text-lg line-clamp-1"><b>${cat.name}</b></div>
                                <div class="text-gray-400 text-sm mt-2">From: ${cat.region}</div>
                                <button class="import-cat-btn mt-2 bg-red-600 text-white px-4 py-1 rounded-lg hover:bg-red-700 transition" data-cat-id="${cat.id}">Import</button>
                            `;
                            categoryBoxes.appendChild(box);
                        });

                    // Event delegation for import buttons
                    categoryBoxes.querySelectorAll('.import-cat-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const catId = btn.getAttribute('data-cat-id');
                            console.log('Import button clicked for category ID:', catId);
                            alert(`Category ${catId} imported`); // Placeholder for API call
                        });
                    });
                }
            });

            closeImportModal.addEventListener('click', () => {
                console.log('Close import modal clicked');
                importModal.classList.add('hidden');
                categoryBoxes.innerHTML = '';
            });

            // Handle content addition
            const contentArea = document.getElementById('content-area');
            let contentOrder = [];
            let articleCount = 0, photoCount = 0, linkCount = 0, adCount = 0;

            document.getElementById('article-icon').addEventListener('click', () => {
                console.log('Article icon clicked');
                const div = document.createElement('div');
                div.className = 'relative mb-4';
                div.id = `article-placeholder-${++articleCount}`;
                div.innerHTML = `
                    <textarea class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" rows="6" placeholder="Write your article here..."></textarea>
                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                `;
                contentArea.appendChild(div);
                contentOrder.push('article');
                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                    console.log('Remove article clicked:', div.id);
                    div.remove();
                    contentOrder = contentOrder.filter((item, index) => item !== 'article' || index !== contentOrder.length - 1);
                });
            });

            document.getElementById('photo-icon').addEventListener('click', () => {
                console.log('Photo icon clicked');
                const div = document.createElement('div');
                div.className = 'relative mb-4';
                div.id = `photo-placeholder-${++photoCount}`;
                div.innerHTML = `
                    <input type="file" accept="image/*" class="w-full text-white bg-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-600 file:text-white hover:file:bg-red-700">
                    <input type="text" class="w-full px-4 py-2 mt-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" placeholder="Image source (e.g., forbes.com)">
                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                `;
                contentArea.appendChild(div);
                contentOrder.push('photo');
                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                    console.log('Remove photo clicked:', div.id);
                    div.remove();
                    contentOrder = contentOrder.filter((item, index) => item !== 'photo' || index !== contentOrder.length - 1);
                });
            });

            document.getElementById('link-icon').addEventListener('click', () => {
                console.log('Link icon clicked');
                const div = document.createElement('div');
                div.className = 'relative mb-4';
                div.id = `link-placeholder-${++linkCount}`;
                div.innerHTML = `
                    <input type="text" class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" placeholder="Enter link (e.g., youtube.com, forbes.com)">
                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                `;
                contentArea.appendChild(div);
                contentOrder.push('link');
                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                    console.log('Remove link clicked:', div.id);
                    div.remove();
                    contentOrder = contentOrder.filter((item, index) => item !== 'link' || index !== contentOrder.length - 1);
                });
            });

            document.getElementById('ads-icon').addEventListener('click', () => {
                console.log('Ads icon clicked');
                const div = document.createElement('div');
                div.className = 'relative mb-4';
                div.id = `ad-selector-${++adCount}`;
                div.innerHTML = `
                    <select class="w-full bg-gray-700 text-white text-lg font-semibold px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600" id="ad-type-selector-${adCount}">
                        <option value="" disabled selected>Select Ad Type</option>
                        <option value="banner-2:1">Banner Ad (2:1)</option>
                        <option value="square-1:1">Square Ad (1:1)</option>
                        <option value="skyscraper-1:3">Skyscraper Ad (1:3)</option>
                    </select>
                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                `;
                contentArea.appendChild(div);
                const adSelector = div.querySelector(`#ad-type-selector-${adCount}`);
                adSelector.addEventListener('change', (e) => {
                    console.log('Ad type selected:', e.target.value);
                    const [adName, adRatio] = e.target.value.split('-');
                    if (adName && adRatio) {
                        const adDiv = document.createElement('div');
                        adDiv.className = 'relative mb-4';
                        adDiv.id = `ad-placeholder-${adCount}`;
                        adDiv.innerHTML = `
                            <div class="w-full h-48 bg-gray-700 rounded-md flex items-center justify-center text-gray-400">${adName} (${adRatio})</div>
                            <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                            </button>
                        `;
                        contentArea.replaceChild(adDiv, div);
                        contentOrder.push('ad');
                        adDiv.querySelector('.remove-content-btn').addEventListener('click', () => {
                            console.log('Remove ad clicked:', adDiv.id);
                            adDiv.remove();
                            contentOrder = contentOrder.filter((item, index) => item !== 'ad' || index !== contentOrder.length - 1);
                        });
                    }
                });
                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                    console.log('Remove ad selector clicked:', div.id);
                    div.remove();
                    contentOrder = contentOrder.filter((item, index) => item !== 'ad' || index !== contentOrder.length - 1);
                });
            });

            // Form Submission
            document.getElementById('category-form').addEventListener('submit', (e) => {
                e.preventDefault();
                console.log('Category form submitted');
                const categoryName = document.getElementById('category-name').value;
                const vehicleType = document.getElementById('vehicle-type').value;
                const sources = document.getElementById('sources').value;
                console.log('Form data:', { categoryName, vehicleType, sources, contentOrder });
                alert('Category submitted: ' + categoryName); // Placeholder for API call
            });

            // Published Categories
            const publishedVehicleTypeSelector = document.getElementById('published-vehicle-type-selector');
            const publishedCategoryBoxes = document.getElementById('published-category-boxes');

            publishedVehicleTypeSelector.addEventListener('change', (e) => {
                console.log('Published vehicle type selected:', e.target.value);
                const vehicleType = e.target.value;
                if (vehicleType) {
                    // Mock data for published categories (replace with API response)
                    const publishedCategories = [
                        { id: 1, name: 'SUV', vehicleType: 'car', photo: 'suv.jpg' },
                        { id: 2, name: 'Hatchback', vehicleType: 'car', photo: 'hatchback.jpg' }
                    ];
                    publishedCategoryBoxes.innerHTML = '';
                    publishedCategories
                        .filter(cat => cat.vehicleType === vehicleType)
                        .forEach(cat => {
                            const box = document.createElement('div');
                            box.className = 'bg-gradient-to-b from-red-500 to-black rounded-xl shadow-xl transition-all duration-300 p-5 flex flex-col items-center text-center border-bottom-left-to-right shadow-md';
                            box.innerHTML = `
                                <div class="w-full h-32 bg-white rounded-lg mb-4 shadow-inner border-transparent">
                                    <img src="/Uploads/categories/${cat.photo}" alt="${cat.name}" class="w-full h-full object-cover rounded-lg">
                                </div>
                                <div class="text-white font-semibold text-lg line-clamp-1"><b>${cat.name}</b></div>
                                <div class="flex justify-center space-x-2 mt-2">
                                    <button class="edit-cat-btn bg-blue-600 text-white px-4 py-1 rounded-lg hover:bg-blue-700 transition" data-cat-id="${cat.id}">Edit</button>
                                    <button class="delete-cat-btn bg-red-600 text-white px-4 py-1 rounded-lg hover:bg-red-700 transition" data-cat-id="${cat.id}">Delete</button>
                                </div>
                            `;
                            publishedCategoryBoxes.appendChild(box);
                        });

                    // Event delegation for edit and delete buttons
                    publishedCategoryBoxes.addEventListener('click', (e) => {
                        if (e.target.classList.contains('edit-cat-btn')) {
                            const catId = e.target.getAttribute('data-cat-id');
                            console.log('Edit button clicked for category ID:', catId);
                            const category = publishedCategories.find(cat => cat.id == catId);
                            const editForm = document.createElement('div');
                            editForm.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50';
                            editForm.innerHTML = `
                                <div class="bg-gray-800 rounded-lg p-6 w-full max-w-2xl">
                                    <h3 class="text-2xl font-bold text-white mb-4">Edit Category</h3>
                                    <form id="edit-category-form" enctype="multipart/form-data" class="space-y-6">
                                        <div>
                                            <label for="edit-category-image" class="block text-sm font-medium text-gray-300 mb-1">Category Image</label>
                                            <img src="/Uploads/categories/${category.photo}" alt="${category.name}" class="w-48 h-32 object-contain rounded-md mb-2">
                                            <input type="file" id="edit-category-image" name="categoryImage" accept="image/*" class="w-full text-white bg-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-600 file:text-white hover:file:bg-red-700">
                                        </div>
                                        <div>
                                            <label for="edit-category-name" class="block text-sm font-medium text-gray-300 mb-1">Category Name</label>
                                            <input type="text" id="edit-category-name" name="categoryName" value="${category.name}" required class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white">
                                        </div>
                                        <div>
                                            <label for="edit-vehicle-type" class="block text-sm font-medium text-gray-300 mb-1">Vehicle Type</label>
                                            <select id="edit-vehicle-type" name="vehicleType" required class="w-full bg-gray-700 text-white text-lg font-semibold px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600">
                                                <option value="car" ${category.vehicleType === 'car' ? 'selected' : ''}>Car</option>
                                                <option value="bike" ${category.vehicleType === 'bike' ? 'selected' : ''}>Bike</option>
                                                <option value="truck" ${category.vehicleType === 'truck' ? 'selected' : ''}>Truck</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-1">Write Article About This Category</label>
                                            <div class="flex space-x-4 mb-4">
                                                <button type="button" class="edit-article-icon icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Article">
                                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                                                </button>
                                                <button type="button" class="edit-photo-icon icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Photo">
                                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                                </button>
                                                <button type="button" class="edit-link-icon icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Link">
                                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                                                </button>
                                                <button type="button" class="edit-ads-icon icon-button bg-gray-700 p-2 rounded-full hover:bg-red-600 transition" title="Add Ad">
                                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.379c.4 0 .78.157 1.06.44" /></svg>
                                                </button>
                                            </div>
                                            <div id="edit-content-area" class="relative">
                                                <!-- Dynamically populated content -->
                                            </div>
                                            <div>
                                                <label for="edit-sources" class="block text-sm font-medium text-gray-300 mb-1">Sources</label>
                                                <textarea id="edit-sources" name="sources" placeholder="List source sites (e.g., forbes.com, youtube.com)" class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" rows="4"></textarea>
                                            </div>
                                        </div>
                                        <div class="flex justify-between">
                                            <button type="button" class="close-edit-form bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">Cancel</button>
                                            <button type="submit" class="submit-edit-form bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Update Category</button>
                                        </div>
                                    </form>
                                </div>
                            `;
                            document.body.appendChild(editForm);
                            let editArticleCount = 0, editPhotoCount = 0, editLinkCount = 0, editAdCount = 0;
                            editForm.querySelector('.edit-article-icon').addEventListener('click', () => {
                                console.log('Edit article icon clicked');
                                const div = document.createElement('div');
                                div.className = 'relative mb-4';
                                div.id = `edit-article-placeholder-${++editArticleCount}`;
                                div.innerHTML = `
                                    <textarea class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" rows="6" placeholder="Write your article here..."></textarea>
                                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                    </button>
                                `;
                                editForm.querySelector('#edit-content-area').appendChild(div);
                                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                                    console.log('Remove edit article clicked:', div.id);
                                    div.remove();
                                });
                            });
                            editForm.querySelector('.edit-photo-icon').addEventListener('click', () => {
                                console.log('Edit photo icon clicked');
                                const div = document.createElement('div');
                                div.className = 'relative mb-4';
                                div.id = `edit-photo-placeholder-${++editPhotoCount}`;
                                div.innerHTML = `
                                    <input type="file" accept="image/*" class="w-full text-white bg-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-600 file:text-white hover:file:bg-red-700">
                                    <input type="text" class="w-full px-4 py-2 mt-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" placeholder="Image source (e.g., forbes.com)">
                                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                    </button>
                                `;
                                editForm.querySelector('#edit-content-area').appendChild(div);
                                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                                    console.log('Remove edit photo clicked:', div.id);
                                    div.remove();
                                });
                            });
                            editForm.querySelector('.edit-link-icon').addEventListener('click', () => {
                                console.log('Edit link icon clicked');
                                const div = document.createElement('div');
                                div.className = 'relative mb-4';
                                div.id = `edit-link-placeholder-${++editLinkCount}`;
                                div.innerHTML = `
                                    <input type="text" class="w-full px-4 py-2 bg-gray-700 border border-red-600 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-white" placeholder="Enter link (e.g., youtube.com, forbes.com)">
                                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                    </button>
                                `;
                                editForm.querySelector('#edit-content-area').appendChild(div);
                                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                                    console.log('Remove edit link clicked:', div.id);
                                    div.remove();
                                });
                            });
                            editForm.querySelector('.edit-ads-icon').addEventListener('click', () => {
                                console.log('Edit ads icon clicked');
                                const div = document.createElement('div');
                                div.className = 'relative mb-4';
                                div.id = `edit-ad-selector-${++editAdCount}`;
                                div.innerHTML = `
                                    <select class="w-full bg-gray-700 text-white text-lg font-semibold px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600" id="edit-ad-type-selector-${editAdCount}">
                                        <option value="" disabled selected>Select Ad Type</option>
                                        <option value="banner-2:1">Banner Ad (2:1)</option>
                                        <option value="square-1:1">Square Ad (1:1)</option>
                                        <option value="skyscraper-1:3">Skyscraper Ad (1:3)</option>
                                    </select>
                                    <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                    </button>
                                `;
                                editForm.querySelector('#edit-content-area').appendChild(div);
                                const adSelector = div.querySelector(`#edit-ad-type-selector-${editAdCount}`);
                                adSelector.addEventListener('change', (e) => {
                                    console.log('Edit ad type selected:', e.target.value);
                                    const [adName, adRatio] = e.target.value.split('-');
                                    if (adName && adRatio) {
                                        const adDiv = document.createElement('div');
                                        adDiv.className = 'relative mb-4';
                                        adDiv.id = `edit-ad-placeholder-${editAdCount}`;
                                        adDiv.innerHTML = `
                                            <div class="w-full h-48 bg-gray-700 rounded-md flex items-center justify-center text-gray-400">${adName} (${adRatio})</div>
                                            <button class="remove-content-btn absolute top-2 left-2 text-red-600 hover:text-red-700" title="Remove">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                            </button>
                                        `;
                                        editForm.querySelector('#edit-content-area').replaceChild(adDiv, div);
                                        adDiv.querySelector('.remove-content-btn').addEventListener('click', () => {
                                            console.log('Remove edit ad clicked:', adDiv.id);
                                            adDiv.remove();
                                        });
                                    }
                                });
                                div.querySelector('.remove-content-btn').addEventListener('click', () => {
                                    console.log('Remove edit ad selector clicked:', div.id);
                                    div.remove();
                                });
                            });
                            editForm.querySelector('.close-edit-form').addEventListener('click', () => {
                                console.log('Close edit form clicked');
                                editForm.remove();
                            });
                            editForm.querySelector('#edit-category-form').addEventListener('submit', (e) => {
                                e.preventDefault();
                                console.log('Edit category form submitted');
                                const categoryName = editForm.querySelector('#edit-category-name').value;
                                const vehicleType = editForm.querySelector('#edit-vehicle-type').value;
                                const sources = editForm.querySelector('#edit-sources').value;
                                console.log('Edit form data:', { categoryName, vehicleType, sources });
                                alert('Category updated: ' + categoryName); // Placeholder for API call
                                editForm.remove();
                            });
                        }
                        if (e.target.classList.contains('delete-cat-btn')) {
                            const catId = e.target.getAttribute('data-cat-id');
                            console.log('Delete button clicked for category ID:', catId);
                            if (confirm('Are you sure you want to delete this category? This action only affects the current region.')) {
                                alert(`Category ${catId} deleted from USA region`); // Placeholder for API call
                                e.target.closest('.bg-gradient-to-b').remove();
                            }
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>