<%- include('../partials/head.ejs', { title: 'Gyarage' }) %>

        #country-selector option {
            background-color: white;
            color: black;
        }
        #country-selector option:hover {
            background-color: #DC2626;
            color: white;
        }
        .border-bottom-left-to-right {
            position: relative;
            border-radius: 0.75rem; /* rounded-xl */
        }
        .border-bottom-left-to-right:hover::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #DC2626;
            animation: borderLeftToRight 0.3s ease-in-out forwards;
        }
        @keyframes borderLeftToRight {
            to {
                width: 100%;
            }
        }
        .object-cover {
            object-fit: cover;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-black text-white font-['Poppins']">
    <!-- Navbar -->
<%- include('../partials/navbar') %>

    <!-- Main Section -->
    <main class="flex-grow container mx-auto px-4 py-8 max-w-screen-2xl bg-black">

        <!-- Breadcrumb and Filter -->
        <div class="flex flex-row justify-between items-center mb-4">
            <div class="breadcrumb text-white text-sm sm:text-base flex items-center">
                <a href="/" class="hover:text-red-600">Gyarage</a> <span class="mx-2 text-red-600">&gt;&gt;</span> 
                <a href="/usa" class="text-red-600 font-bold">USA</a>
            </div>
            <div>
                <button id="filter-button" class="filter-button bg-white text-black text-sm font-semibold px-4 py-2 rounded-lg hover:bg-red-600 hover:text-white transition">
                    Filter
                </button>
            </div>
        </div>

        <!-- Hero Section -->
        <div class="text-center mb-16 mt-10">
            <h1 class="text-3xl sm:text-5xl md:text-7xl font-extrabold text-white leading-tight drop-shadow-lg">
                Welcome to <span class="text-red-600">Gyarage</span>
            </h1>
            <p class="text-base sm:text-xl md:text-2xl text-white bg-red-600 inline-block px-4 py-2 sm:px-8 sm:py-3 rounded-lg shadow-lg mt-4">
                Global Hub for Automotive Information
            </p>
        </div>

       <!-- Vehicle Types -->
        <section class="vehicle-types mx-auto max-w-screen-2xl mt-12">
            <div class="text-3xl font-bold text-white mb-6">Vehicle Types</div>
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
    <% vehicleTypes.forEach(vehicleType => { %>
    <a href="/brands?vehicle_type=<%= vehicleType.vehicle_type_id %>" class="block">
        <div class="bg-gradient-to-b from-red-500 to-black rounded-xl shadow-xl transition-all duration-300 p-4 flex flex-col items-center text-center border-bottom-left-to-right shadow-md hover:transform cursor-pointer w-56 mx-auto">
            <% if (vehicleType.vehicle_type_photo_path) { %>
                <img src="<%= vehicleType.vehicle_type_photo_path %>" alt="<%= vehicleType.vehicle_type_name %>" class="w-44 h-36 object-cover rounded-lg mb-3 shadow-inner">
            <% } else { %>
                <div class="w-44 h-36 bg-white rounded-lg mb-3 shadow-inner border-transparent"></div>
            <% } %>
            <div class="text-white font-semibold text-base line-clamp-1"><b><%= vehicleType.vehicle_type_name %></b></div>
        </div>
    </a>
    <% }); %>
</div>
        </section>

        <!-- Articles after Vehicle Types -->
        <section class="article-main-box mx-auto max-w-screen-2xl mt-12">
<div class="article-boxes grid grid-cols-1 lg:grid-cols-2 gap-8 mt-6">
    <% articlesAfterVehicleTypes.forEach(article => { %>
    <a href="/news/<%= article.Article_id %>-<%= article.Article_title.toLowerCase().replace(/[^a-z0-9]+/g, '-') %>" class="block">
        <div class="p-2 rounded-xl bg-gradient-to-b from-red-600 to-black shadow-lg border-bottom-left-to-right hover:transform cursor-pointer">
            <div class="flex flex-row items-start p-2 rounded-xl">
                <% if (article.Article_main_image) { %>
                    <img src="<%= article.Article_main_image %>" alt="<%= article.Article_title %>" class="article-image w-60 h-40 bg-white rounded-lg flex-shrink-0 object-cover">
                <% } else { %>
                    <div class="article-image w-40 h-40 bg-white rounded-lg flex-shrink-0"></div>
                <% } %>
                <div class="content ml-4 flex-grow text-white">
                    <div class="article-title text-lg sm:text-2xl font-semibold mb-2 line-clamp-3">
                        <%= article.Article_title %>
                    </div>
                    <div class="date font-semibold">
                        <%= new Date(article.published_date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %>
                    </div>
                </div>
            </div>
        </div>
    </a>
    <% }); %>
</div>
        </section>

        <!-- Categories -->
        <section class="categories mx-auto max-w-screen-2xl mt-12">
            <div class="text-3xl font-bold text-white mb-6">Categories</div>
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
    <% categories.forEach(category => { %>
    <a href="/categorydetails/<%= category.category_id %>" class="block">
        <div class="bg-gradient-to-b from-red-500 to-black rounded-xl shadow-xl transition-all duration-300 p-4 flex flex-col items-center text-center border-bottom-left-to-right shadow-md hover:transform cursor-pointer w-56 mx-auto">
            <% if (category.image_path) { %>
                <img src="<%= category.image_path %>" alt="<%= category.name %>" class="w-44 h-36 object-cover rounded-lg mb-3 shadow-inner">
            <% } else { %>
                <div class="w-44 h-36 bg-white rounded-lg mb-3 shadow-inner border-transparent"></div>
            <% } %>
            <div class="text-white font-semibold text-base line-clamp-1"><b><%= category.name %></b></div>
        </div>
    </a>
    <% }); %>
</div>
        </section>

        <!-- Articles after Categories -->
        <section class="article-main-box mx-auto max-w-screen-2xl mt-12">
<div class="article-boxes grid grid-cols-1 lg:grid-cols-2 gap-8 mt-6">
    <% articlesAfterCategories.forEach(article => { %>
    <a href="/news/<%= article.Article_id %>-<%= article.Article_title.toLowerCase().replace(/[^a-z0-9]+/g, '-') %>" class="block">
        <div class="p-2 rounded-xl bg-gradient-to-b from-red-600 to-black shadow-lg border-bottom-left-to-right hover:transform cursor-pointer">
            <div class="flex flex-row items-start p-2 rounded-xl">
                <% if (article.Article_main_image) { %>
                    <img src="<%= article.Article_main_image %>" alt="<%= article.Article_title %>" class="article-image w-60 h-40 bg-white rounded-lg flex-shrink-0 object-cover">
                <% } else { %>
                    <div class="article-image w-40 h-40 bg-white rounded-lg flex-shrink-0"></div>
                <% } %>
                <div class="content ml-4 flex-grow text-white">
                    <div class="article-title text-lg sm:text-2xl font-semibold mb-2 line-clamp-3">
                        <%= article.Article_title %>
                    </div>
                    <div class="date font-semibold">
                        <%= new Date(article.published_date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %>
                    </div>
                </div>
            </div>
        </div>
    </a>
    <% }); %>
</div>
        </section>

        <!-- Brands -->
        <section class="brands mx-auto max-w-screen-2xl mt-12">
            <div class="text-3xl font-bold text-white mb-6">Brands</div>
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
    <% brands.forEach(brand => { %>
    <a href="/brandsdetails/<%= brand.brand_id %>" class="block">
        <div class="bg-gradient-to-b from-red-500 to-black rounded-xl shadow-xl transition-all duration-300 p-4 flex flex-col items-center text-center border-bottom-left-to-right shadow-md hover:transform cursor-pointer w-56 mx-auto">
            <% if (brand.image_path) { %>
                <img src="<%= brand.image_path %>" alt="<%= brand.name %>" class="w-44 h-36 object-cover rounded-lg mb-3 shadow-inner">
            <% } else { %>
                <div class="w-44 h-36 bg-white rounded-lg mb-3 shadow-inner border-transparent"></div>
            <% } %>
            <div class="text-white font-semibold text-base line-clamp-1"><b><%= brand.name %></b></div>
        </div>
    </a>
    <% }); %>
</div>
        </section>

        <!-- Articles after Brands -->
        <section class="article-main-box mx-auto max-w-screen-2xl mt-12">
<div class="article-boxes grid grid-cols-1 lg:grid-cols-2 gap-8 mt-6">
    <% articlesAfterBrands.forEach(article => { %>
    <a href="/news/<%= article.Article_id %>-<%= article.Article_title.toLowerCase().replace(/[^a-z0-9]+/g, '-') %>" class="block">
        <div class="p-2 rounded-xl bg-gradient-to-b from-red-600 to-black shadow-lg border-bottom-left-to-right hover:transform cursor-pointer">
            <div class="flex flex-row items-start p-2 rounded-xl">
                <% if (article.Article_main_image) { %>
                    <img src="<%= article.Article_main_image %>" alt="<%= article.Article_title %>" class="article-image w-60 h-40 bg-white rounded-lg flex-shrink-0 object-cover">
                <% } else { %>
                    <div class="article-image w-40 h-40 bg-white rounded-lg flex-shrink-0"></div>
                <% } %>
                <div class="content ml-4 flex-grow text-white">
                    <div class="article-title text-lg sm:text-2xl font-semibold mb-2 line-clamp-3">
                        <%= article.Article_title %>
                    </div>
                    <div class="date font-semibold">
                        <%= new Date(article.published_date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %>
                    </div>
                </div>
            </div>
        </div>
    </a>
    <% }); %>
</div>
        </section>

        <!-- Models -->
        <section class="models mx-auto max-w-screen-2xl mt-12">
            <div class="text-3xl font-bold text-white mb-6">Models</div>
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
    <% models.forEach(model => { %>
    <a href="/modeldetails/<%= model.id %>" class="block">
        <div class="bg-gradient-to-b from-red-500 to-black rounded-xl shadow-xl transition-all duration-300 p-4 flex flex-col items-center text-center border-bottom-left-to-right shadow-md hover:transform cursor-pointer">
            <% if (model.model_image) { %>
                <img src="<%= model.model_image %>" alt="<%= model.model_name %>" class="w-full h-36 object-cover rounded-lg mb-4 shadow-inner">
            <% } else { %>
                <div class="w-full h-36 bg-white rounded-lg mb-4 shadow-inner border-transparent"></div>
            <% } %>
            <div class="flex items-center justify-center gap-2 mb-2">
                <% if (model.brand_name) { %>
                    <div class="text-white font-semibold text-base line-clamp-1"><b><%= model.brand_name %></b></div>
                <% } %>
                <div class="text-white font-semibold text-base line-clamp-1"><b><%= model.model_name %></b></div>
            </div>
            <% if (model.starting_price) { %>
                <div class="text-red-400 font-bold mt-2 text-lg">$<%= Number(model.starting_price).toLocaleString() %></div>
            <% } %>
            <div class="mt-4 px-4 py-2 bg-white text-black rounded-full text-sm font-semibold transition duration-300 transform hover:bg-red-600 hover:text-white">Check out</div>
        </div>
    </a>
    <% }); %>
</div>
        </section>

        <!-- Articles after Models -->
        <section class="article-main-box mx-auto max-w-screen-2xl mt-12">
<div class="article-boxes grid grid-cols-1 lg:grid-cols-2 gap-8 mt-6">
    <% articlesAfterModels.forEach(article => { %>
    <a href="/news/<%= article.Article_id %>-<%= article.Article_title.toLowerCase().replace(/[^a-z0-9]+/g, '-') %>" class="block">
        <div class="p-2 rounded-xl bg-gradient-to-b from-red-600 to-black shadow-lg border-bottom-left-to-right hover:transform cursor-pointer">
            <div class="flex flex-row items-start p-2 rounded-xl">
                <% if (article.Article_main_image) { %>
                    <img src="<%= article.Article_main_image %>" alt="<%= article.Article_title %>" class="article-image w-60 h-40 bg-white rounded-lg flex-shrink-0 object-cover">
                <% } else { %>
                    <div class="article-image w-40 h-40 bg-white rounded-lg flex-shrink-0"></div>
                <% } %>
                <div class="content ml-4 flex-grow text-white">
                    <div class="article-title text-lg sm:text-2xl font-semibold mb-2 line-clamp-3">
                        <%= article.Article_title %>
                    </div>
                    <div class="date font-semibold">
                        <%= new Date(article.published_date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %>
                    </div>
                </div>
            </div>
        </div>
    </a>
    <% }); %>
</div>
        </section>
    </main>

    
<%- include('../partials/footer') %>


    <script>
        // Country Selector Redirect
        document.getElementById('country-selector').addEventListener('change', (e) => {
            const country = e.target.value;
            if (country) {
                window.location.href = `/${country}`;
            }
        });

        // Simulate Sign-In Status (Replace with actual auth logic later)
        const isSignedIn = false; // This will come from backend session/auth
        const authLink = document.getElementById('auth-link');
        if (isSignedIn) {
            authLink.innerHTML = '<svg class="w-6 h-6 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 18.364A4 4 0 018 17h8a4 4 0 012.879 1.364M15 10a3 3 0 11-6 0 3 3 0 016 0zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>';
            authLink.href = '/profile';
        } else {
            authLink.textContent = 'Sign In';
            authLink.href = '/signin';
        }
    </script>
</body>
</html>